<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#375EAB" />

		<title>Changelog for awwan</title>

		<style>
		
body {
	margin: 0;
	font-family: Arial, sans-serif;
	background-color: #fff;
	line-height: 1.3;
	text-align: center;
	color: #222;
}
pre,
code {
	font-family: Menlo, monospace;
	font-size: 0.875rem;
}
pre {
	line-height: 1.4;
	overflow-x: auto;
	background: #efefef;
	padding: 0.625rem;
	border-radius: 0.3125rem;
}
a {
	color: #007d9c;
	text-decoration: none;
}
a:hover {
	text-decoration: underline;
}

p,
li {
	max-width: 50rem;
	word-wrap: break-word;
}
li p {
	margin: 2px;
}
p,
pre,
ul,
ol {
	margin: 1.25rem;
}

h1,
h2,
h3,
h4 {
	margin: 1.25rem 0 1.25rem;
	padding: 0;
	color: #007d9c;
	font-weight: bold;
}
h1 {
	font-size: 1.75rem;
	line-height: 1;
}
h1 .text-muted {
	color: #777;
}
h2 {
	clear: right;
	font-size: 1.25rem;
	background: #e0ebf5;
	padding: 0.5rem;
	line-height: 1.25;
	font-weight: normal;
	overflow: auto;
	overflow-wrap: break-word;
}
h2 a {
	font-weight: bold;
}
h3 {
	font-size: 1.25rem;
	line-height: 1.25;
	overflow: auto;
	overflow-wrap: break-word;
}
h3,
h4 {
	margin: 1.25rem 0.3125rem;
}
h4 {
	font-size: 1rem;
}

h2 > span,
h3 > span {
	float: right;
	margin: 0 25px 0 0;
	font-weight: normal;
	color: #5279c7;
}

dl {
	margin: 1.25rem;
}
dd {
	margin: 0 0 0 1.25rem;
}
dl,
dd {
	font-size: 0.875rem;
}

/**
 * Custom classes for pages
 */

.topbar {
	background: #e0ebf5;
	height: 4rem;
	overflow: hidden;
}

.topbar .top-heading,
.topbar .menu {
	padding: 1.313rem 0;
	font-size: 1.25rem;
	font-weight: normal;
}
.topbar .top-heading {
	float: left;
}
.topbar .top-heading a {
	color: #222;
	text-decoration: none;
}

.top-heading .header-logo {
	height: 2rem;
	width: 5.125rem;
}

.topbar .menu {
	float: right;
}
.topbar .menu a {
	margin: 0.625rem 0.125rem;
	padding: 0.625rem;
	color: white;
	background: #007d9c;
	border: 0.0625rem solid #007d9c;
	border-radius: 5px;
}
.topbar .menu form {
	display: inline-block;
}

.page {
	width: 100%;
}

.page > .container,
.topbar > .container,
.footer > .container {
	margin-left: auto;
	margin-right: auto;
	padding: 0 1.25rem;
	max-width: 59.38rem;
}

.page > .container {
	text-align: left;
}

.container .meta {
	font-style: italic;
	margin: 1.25rem;
}

.footer {
	text-align: center;
	color: #666;
	font-size: 0.875rem;
	margin: 2.5rem 0;
}

/** Custom classes */
#toctitle {
	display: none;
}
#toc li {
	list-style: none;
}
#toc ul .sectlevel1 {
	padding: 0px;
	margin: 4px;
}
#toc ul .sectlevel2 {
	margin: 4px;
}

@media screen and (max-width: 992px) {
	#toc {
		all: unset;
	}
}

		</style>
	</head>
	<body>
		<div class="topbar">
			<div class="container">
				<div class="top-heading">
					<a href="/">ciigo</a>
				</div>
				<div class="menu">
					<form class="item" action="/_internal/search">
						<input type="text" name="q" placeholder="Search" />
					</form>
				</div>
			</div>
		</div>

		<div class="page">
			<div class="container">
				
<div id="header">
<h1>Changelog for awwan</h1>
<div class="details">
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
</div>
</div>
<div class="sect1">
<h2 id="_awwan_0_4_0_2022_02_05">awwan 0.4.0 (2022.02.05)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release bring new command "serve" to awwan.
The serve command run HTTP server that provide web-user interface to create,
edit, save, and execute script.</p>
</div>
<div class="sect2">
<h3 id="_new_features">New features</h3>
<div class="ulist">
<ul>
<li>
<p>all: implement HTTP API and function to Save file on web-user interface</p>
<div class="paragraph">
<p>The web-user interface now have button "Save" that save the edited
content of file to storage.</p>
</div>
</li>
<li>
<p>all: implement serve command</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The serve command will run a HTTP server that provide web-user interface
to edit and execute script.</p>
</div>
<div class="paragraph">
<p>Currently, the web-user interface provide the following features,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browsing the workspace</p>
</li>
<li>
<p>Running the script on local or remote</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>all: make the local statement executed with "/bin/sh -c &#8230;&#8203;"</p>
<div class="paragraph">
<p>By using "sh -c", the statement can contains environment variable,
piping, and other shell commands that cannot be supported if executed
directly using native os.Exec.</p>
</div>
</li>
<li>
<p>all: expand the environment on statement when executing local script</p>
<div class="paragraph">
<p>This changes replace the string ${x} or $x in the statements with the
current environment variables values.</p>
</div>
<div class="paragraph">
<p>For example, statement "mkdir ${HOME}/tmp" will expand the ${HOME} to
the current user home directory.</p>
</div>
</li>
<li>
<p>all: use native SFTP to put and get file when possible</p>
<div class="paragraph">
<p>Previously, the command to put and get file from remote server depends
on installed scp program on the host computer.</p>
</div>
<div class="paragraph">
<p>In this changes we add the SFTP client and use it as primary function
to put and get file to/from remote when possible and use the scp as
fallback.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_awwan_0_3_0_2021_06_09">awwan 0.3.0 (2021.06.09)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>go.mod: set the minimum Go to 1.16 and update to share module v0.25.1</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_enhancements_1">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>cmd/awwan: print the awwan version on command usage output</p>
</li>
<li>
<p>all: check and return an error if start index is out of range</p>
</li>
<li>
<p>all: log error when executing script (local or play)</p>
</li>
<li>
<p>all: do not load SSH config if command mode is "local"</p>
<div class="paragraph">
<p>If the mode is local there is no need to parse and load the SSH config,
since the command to be executed will run on local machine anyway.</p>
</div>
</li>
<li>
<p>all: set base dir based on the first .ssh directory that we found</p>
<div class="paragraph">
<p>Previously, the base directory is set on current working directory.
This limit the way to execute awwan only from the directory
that contains the .ssh directory.</p>
</div>
<div class="paragraph">
<p>This changes set the environment BaseDir based on the first .ssh
directory that we found from script path up to the "/".  So, user can
execute awwan script from any sub-directories.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_awwan_0_2_1_2021_01_18">awwan 0.2.1 (2021.01.18)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Update the share modules which bring fixes to "#put" commands.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_awwan_0_2_0_2020_07_05">awwan 0.2.0 (2020.07.05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_1">New features</h3>
<div class="ulist">
<ul>
<li>
<p>environment: export the SSH key, user, host, and port</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>By knowing this values, user can use it to invoke other SSH related
command, for example to copy file using <code>scp</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>scp -i {{.SSHKey}} src {{.SSHUser}}@{{.SSHHost}}:{{.SSHPort}}/dst</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>all: add magic command "#require:"</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Magic word <code>#require:</code> will ensure that the next statement will always
executed when its skipped with start number.
For example, given following script with line number</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1: #require:
2: echo a
3: echo b
4: #require:
5: echo c</pre>
</div>
</div>
<div class="paragraph">
<p>executing <code>awwan local script.aww 3</code>, will always execute line
number 2 <code>echo a</code>, but not line number 5 (because its before line start 3).</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>command: change the owner of file when doing #get!</p>
<div class="paragraph">
<p>In case the owner of file is not active user and it does not have
read permission, the "#get!" command will fail when copying command
from remote to local.</p>
</div>
</li>
<li>
<p>command: fix magic copy and get command on templates</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_2">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>command: merge sequences of spaces on command into single space</p>
</li>
<li>
<p>command: check for single, double, or back quote on command</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, if command contains quote like,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>echo "a b"</pre>
</div>
</div>
<div class="paragraph">
<p>the script will run it as ["echo", <code>"a</code>, <code>b"</code>] which is not what we
will expected and may cause some command failed to run.</p>
</div>
<div class="paragraph">
<p>This changes fix the parsing of command string by detecting possible
quote.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_awwan_0_1_0_2020_05_30">awwan 0.1.0 (2020.05.30)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Its better late than never.</p>
</div>
<div class="paragraph">
<p>The first release works for everyday use.
The <code>local</code>, <code>play</code> command works as it is, and its has been used for
deploying and managing postfix, dovecot, haproxy, and my personal server and
services at kilabit.info.
Also it has been used to deploy Go microservices using Kubernetes using
combination of <code>gcloud</code> and <code>kubectl</code>.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-02-05 21:14:21 +0700
</div>
</div>
			</div>
			
		</div>
		

		<div class="footer">
			Powered by <a
				href="https://git.sr.ht/~shulhan/ciigo"
			>
				ciigo
			</a>
		</div>
	</body>
</html>